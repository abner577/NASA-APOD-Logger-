from src.nasa_client import *
from src.utils.user_settings import *


def startup_banner():
    print(r"""
    â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—     â–ˆâ–ˆâ•—      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— 
    â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—
    â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
    â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—
    â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘
    â•šâ•â•  â•šâ•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•    â•šâ•â•  â•šâ•â•â•šâ•â•      â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•     â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â•  â•šâ•â•â•â•â•â•  â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•
    """)


def startup_art():
    print(r"""....................................................................................................
....................................................................................................
....-====--:........................................................................................
..-@@@@@@@@@@@%*+=-.......................::-=++****++==-:..........................................
..+@@@@@@@@@@@@@@@@@%*=::.............-+#@@@@@@@@@@@@@@@@@@#+-:.....................................
...#@@@@@@@@@%%%%@@@@@@@@%*=:......=#@@@@@@@@@@@@@@@@@@@@@@@@@@#=:..................................
....+@@@@@@%-.......-+*#@@@@@@#--*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#-................................
.....-%@@@@@=.............-*##+#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%-..............................
.......+@@@@@+..............:*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#:............................
........:*@@@@#-...........-%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%=...........................
..........:*@@@@*-........=@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+:.........................
.............*@@@@#:.....=@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+.........................
...............+%@@@%:..-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=........................
.................-%@@@@=-%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%:.......................
....................*@@@@#-*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+:......................
......................:%@@@@=-%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%:......................
......................:@==@@@@#-+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-......................
......................:@@@%-+@@@@#-#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=......................
......................:@@@@@@#=#@@@@*-#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=......................
.......................@@@@@@@@@*=#@@@@*:#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-......................
.......................#@@@@@@@@@@@*=%@@@@#-*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%:......................
.......................=@@@@@@@@@@@@@@*-#@@@@#=+@@@@@@@@@@@@@@@@@@@@@@@@@@@@+*%*....................
........................%@@@@@@@@@@@@@@@%#=*@@@@%++%@@@@@@@@@@@@@@@@@@@@@@@%-%@@@#:.................
........................-@@@@@@@@@@@@@@@@@@@#++@@@@%*=*@@@@@@@@@@@@@@@@@@@@=..-%@@@%+...............
.........................=@@@@@@@@@@@@@@@@@@@@@%*+#@@@@#+=#@@@@@@@@@@@@@@@+.....:#@@@%+.............
..........................=@@@@@@@@@@@@@@@@@@@@@@@%*+*@@@@%#==#@@@@@@@@@@+........:*@@@@*:..........
...........................=%@@@@@@@@@@@@@@@@@@@@@@@@%#++#@@@@%*++#@@@@%=...........-%@@@@+:........
............................:*@@@@@@@@@@@@@@@@@@@@@@@@@@@%*=+%@@@@%#+==:..............+@@@@@+.......
..............................-#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#*=+%@@@@%#+-.............=@@@@@%-.....
................................-*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#=-+#@@@@@%#*=-.......-%@@@@@@+:...
..................................:=#@@@@@@@@@@@@@@@@@@@@@@@@@@#=:.....:=*%@@@@@@@%%##%@@@@@@@@@#:..
.....................................:-+#@@@@@@@@@@@@@@@@@@#*=.............:-+*%@@@@@@@@@@@@@@@@@+..
...........................................-==+******++=-:.......................-=+*%@@@@@@@@@@@=..
.......................................................................................:-==++++=:...
....................................................................................................""")


def nasa_apods_menu():
    flag = True
    while flag:
        print(
            "\n======================= NASA APOD Requests ğŸŒŒ =======================\n"
            "     Fetch Astronomy Picture of the Day (APOD) entries from NASA.\n")

        try:
            user_choice = int(input(
                "[1] Todayâ€™s APOD\n"
                "[2] APOD by date\n"
                "[3] Random APODs\n"
                "[4] Return to Main Menu\n\n"
                "Option: "
            ))
        except ValueError:
            print("Invalid input: Please enter a number from 1 to 4.")
            continue
        except Exception as e:
            print(e)
            return

        match user_choice:
            case 1:
                get_todays_apod()
            case 2:
                get_apod_for_specific_day()
            case 3:
                get_random_n_apods()
            case 4:
                print("\nReturning to Main Menu...")
                flag = False


def output_files_menu():
    flag = True
    while flag:
        print(
            "\n======================= Log & File Tools ğŸ—ƒï¸ =======================\n"
            "         View, manage, and maintain your saved APOD logs\n")

        try:
            user_choice = int(input(
                "[1] View first N entries           [6] Show oldest entry (by date)\n"
                "[2] View last N entries            [7] Clear logs (CSV + JSONL)\n"
                "[3] View all entries               [8] Count logged entries\n"
                "[4] Delete entry by date           [9] Return to Main Menu\n"
                "[5] Show most recent entry (by date)\n\n"
                "Option: "
            ))

        except ValueError:
            print("Invalid input: Please enter a number from 1 to 9.")
            return
        except Exception as e:
            print(e)
            return

        match user_choice:
            case 1:
                show_first_n_json_log_entries()
            case 2:
                show_last_n_json_log_entries()
            case 3:
                show_all_json_entries()
            case 4:
                delete_one_json_entry()
            case 5:
                fetch_most_recent_json_apod()
            case 6:
                fetch_oldest_json_apod()
            case 7:
                if clear_json_output_file() and clear_csv_output_file():
                    print("\nAll log files have been cleared.\n")
            case 8:
                line_count = get_line_count(0)
                print(f"\nTotal logged entries: {line_count}\n")
            case 9:
                print("\nReturning to Main Menu...")
                flag = False


def user_settings_menu():
    flag = True
    while flag:
        print(
            "\n======================= Preferences ğŸ“ƒ =======================\n"
            "   Manage how the app behaves after fetching APOD entries.\n")

        try:
            user_choice = int(input(
                "[1] View auto-open setting\n"
                "[2] Change auto-open setting\n"
                "[3] Return to Main Menu\n\n"
                "Option: "
            ))
        except ValueError:
            print("Invalid input: Please enter a number from 1 to 3.")
            return
        except Exception as e:
            print(e)
            return

        match user_choice:
            case 1:
                automatically_redirect = get_user_settings()
                flag = automatically_redirect['automatically_redirect']

                if flag == 'yes':
                    print("\nAuto-open in browser: ON âœ…")
                else:
                    print("\nAuto-open in browser: OFF âŒ")
            case 2:
                update_user_settings()
            case 3:
                print("\nReturning to Main Menu...")
                flag = False
